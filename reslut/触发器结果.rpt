创建触发器1
触发器1测试开始
源数据：
Student表：
S#       Sname      Ssex Sage        D#   Sclass
-------- ---------- ---- ----------- ---- ------
98030101 张三         男    20          03   980301
98030102 张四         男    20          03   980301
98030103 张五         男    19          03   980301
98040201 王三         男    20          04   980402
98040202 王四         男    21          04   980402
98040203 王五         女    19          04   980402

(6 行受影响)

SC表：
S#       C#   Score
-------- ---- -------------
98030101 001  92
98030101 002  85
98030101 003  88
98040202 002  90
98040202 003  80
98040202 001  55
98040203 003  56
98030102 001  54
98030102 002  85
98030102 003  48

(10 行受影响)

修改数据：

(3 行受影响)

(1 行受影响)

(1 行受影响)
Student表：
S#       Sname      Ssex Sage        D#   Sclass
-------- ---------- ---- ----------- ---- ------
98030101 张三         男    20          03   980301
98030103 张五         男    19          03   980301
98040201 王三         男    20          04   980402
98040202 王四         男    21          04   980402
98040203 王五         女    19          04   980402

(5 行受影响)

SC表：
S#       C#   Score
-------- ---- -------------
98030101 001  92
98030101 002  85
98030101 003  88
98040202 002  90
98040202 003  80
98040202 001  55
98040203 003  56

(7 行受影响)

创建触发器2
触发器2测试开始
源数据：
Student表：
S#       Sname      Ssex Sage        D#   Sclass
-------- ---------- ---- ----------- ---- ------
98030101 张三         男    20          03   980301
98030103 张五         男    19          03   980301
98040201 王三         男    20          04   980402
98040202 王四         男    21          04   980402
98040203 王五         女    19          04   980402

(5 行受影响)

SC表：
S#       C#   Score
-------- ---- -------------
98030101 001  92
98030101 002  85
98030101 003  88
98040202 002  90
98040202 003  80
98040202 001  55
98040203 003  56

(7 行受影响)

修改数据：

(3 行受影响)

(1 行受影响)

(1 行受影响)
Student表：
S#       Sname      Ssex Sage        D#   Sclass
-------- ---------- ---- ----------- ---- ------
98030103 张五         男    19          03   980301
98040201 王三         男    20          04   980402
98040202 王四         男    21          04   980402
98040203 王五         女    19          04   980402
99030131 张三         男    20          03   980301

(5 行受影响)

SC表：
S#       C#   Score
-------- ---- -------------
99030131 001  92
99030131 002  85
99030131 003  88
98040202 002  90
98040202 003  80
98040202 001  55
98040203 003  56

(7 行受影响)

创建触发器4
触发器4测试开始
源数据：
SC表：
S#       C#   Score
-------- ---- -------------
99030131 001  92
99030131 002  85
99030131 003  88
98040202 002  90
98040202 003  80
98040202 001  55
98040203 003  56

(7 行受影响)

修改数据：

(2 行受影响)

(1 行受影响)

(2 行受影响)

(1 行受影响)
SC表：
S#       C#   Score
-------- ---- -------------
99030131 001  92
99030131 002  85
99030131 003  88
98040202 002  90
98040202 003  80
98040202 001  55
98040202 004  66

(7 行受影响)

CourSum表：
S#       Sname      SumCourse
-------- ---------- -----------
98040202 王四         4
99030131 张三         3

(2 行受影响)

创建触发器3，5
触发器3，5测试开始
源数据：
T#   Tname      D#   Salary
---- ---------- ---- -------------
001  赵三         01   1200
002  赵四         03   1400
003  赵五         03   1000
004  赵六         04   1100

(4 行受影响)

修改数据：
未指定系主任测试
消息 50000，级别 16，状态 1，过程 TRAGGER_SALARY_UPDATE，行 24 [批起始行 141]
上调工资之前请指定系主任

(1 行受影响)
T#   Tname      D#   Salary
---- ---------- ---- -------------
001  赵三         01   1200
002  赵四         03   1400
003  赵五         03   1000
004  赵六         04   1100

(4 行受影响)

(1 行受影响)

(1 行受影响)

(1 行受影响)

(1 行受影响)

T#   Tname      D#   Salary
---- ---------- ---- -------------
001  赵三         01   1200
002  赵四         03   1400
003  赵五         03   1000
004  赵六         04   1100
007  李五         03   2000
008  李三         01   2000
009  李四         02   2000
010  李六         04   2000

(8 行受影响)

指定系主任测试其他老师
以下结果应该失败
消息 50000，级别 16，状态 1，过程 TRAGGER_SALARY_UPDATE，行 31 [批起始行 141]
上调工资不得高于最高工资

(1 行受影响)
T#   Tname      D#   Salary
---- ---------- ---- -------------
001  赵三         01   1200
002  赵四         03   1400
003  赵五         03   1000
004  赵六         04   1100
007  李五         03   2000
008  李三         01   2000
009  李四         02   2000
010  李六         04   2000

(8 行受影响)

以下结果应该成功

(1 行受影响)

(1 行受影响)
T#   Tname      D#   Salary
---- ---------- ---- -------------
001  赵三         01   1200
002  赵四         03   1800
003  赵五         03   1000
004  赵六         04   1100
007  李五         03   2000
008  李三         01   2000
009  李四         02   2000
010  李六         04   2000

(8 行受影响)

系主任测试
以下结果应该成功

(1 行受影响)

(1 行受影响)
T#   Tname      D#   Salary
---- ---------- ---- -------------
001  赵三         01   1200
002  赵四         03   1800
003  赵五         03   1000
004  赵六         04   1100
007  李五         03   2800
008  李三         01   2000
009  李四         02   2000
010  李六         04   2000

(8 行受影响)

以下结果应该失败
消息 50000，级别 16，状态 1，过程 TRAGGER_SALARY_UPDATE，行 10 [批起始行 141]
只允许上调工资

(1 行受影响)

(1 行受影响)
T#   Tname      D#   Salary
---- ---------- ---- -------------
001  赵三         01   1200
002  赵四         03   1800
003  赵五         03   1000
004  赵六         04   1100
007  李五         03   2000
008  李三         01   2000
009  李四         02   2000
010  李六         04   2000

(8 行受影响)

删除所有触发器
